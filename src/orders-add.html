<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
<script type="text/javascript" src="http://libs.useso.com/js/respond.js/1.4.2/respond.min.js"></script>
<script type="text/javascript" src="http://cdn.bootcss.com/css3pie/2.0beta1/PIE_IE678.js"></script>
<![endif]-->

<link rel="stylesheet" type="text/css" href="static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css" href="lib/Hui-iconfont/1.0.7/iconfont.css" />
<link rel="stylesheet" type="text/css" href="lib/icheck/icheck.css" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/style.css" />
<link type="text/css" rel="stylesheet" href="lib/loading/loading.css" rel="stylesheet" type="text/css"/>
<!--[if IE 7]>
<link href="http://www.bootcss.com/p/font-awesome/assets/css/font-awesome-ie7.min.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link href="lib/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css" />
<title>添加订单</title>

</head>
<body>
<article class="page-container">
  <form class="form form-horizontal"  name='submit_form' id='submit_form' onsubmit="return false">

    <div class="row cl" style="display: none">
      <label class="form-label col-xs-4 col-sm-2">订单id：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="" placeholder="" id="id" name="id">
      </div>
    </div>
    <div class="row cl" style="display: none">
      <label class="form-label col-xs-4 col-sm-2">订单编号：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="" readonly  placeholder="" id="orderNo" name="orderNo">
      </div>
    </div>
    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2">订单金额：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="amount" name="amount">
      </div>
    </div>

      <div class="row cl">
          <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>支付类型：</label>
          <div class="formControls col-xs-8 col-sm-9"> <span class="select-box">
				<select name="payType" id="payType" class="select">
                    <option value="0">现金</option>
                    <option value="1">支付宝</option>
                    <option value="2">微信</option>
                </select>
				</span>
          </div>
      </div>
      <div class="row cl">
          <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>支付状态：</label>
          <div class="formControls col-xs-8 col-sm-9"> <span class="select-box">
				<select name="status" id="status" class="select">
                    <option value="0">已支付</option>
                    <option value="1">待支付</option>
                </select>
				</span>
          </div>
      </div>
    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2">优惠券码：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="couponNo" name="couponNo">
      </div>
    </div>
    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 优惠券金额：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="couponAmount" name="couponAmount">
      </div>
    </div>
   <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 支付价格：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="payAmount" name="payAmount">
      </div>
    </div>
    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 配送价格：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="dispatchCost" name="dispatchCost">
      </div>
    </div>
      <div class="row cl">
          <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>下单类型：</label>
          <div class="formControls col-xs-8 col-sm-9"> <span class="select-box">
				<select name="orderType" id="orderType" class="select">
                    <option value="0">微信下单</option>
                    <option value="1">pc端下单</option>
                    <option value="2">到店下单</option>
                </select>
				</span>
          </div>
      </div>
      <div class="row cl">
          <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>配送类型：</label>
          <div class="formControls col-xs-8 col-sm-9"> <span class="select-box">
				<select name="dispatchType" id="dispatchType" class="select">
                    <option value="0">已经配送</option>
                    <option value="1">未配送</option>
                </select>
				</span>
          </div>
      </div>

      <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 配送地址：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="dispatchAddr" name="dispatchAddr">
      </div>
    </div> <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 联系人：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="contactUserName" name="contactUserName">
      </div>
    </div> <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 联系电话：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="contractTel" name="contractTel">
      </div>
    </div>
    <div class="row cl">
      <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2">
        <button onClick="addOrders();" class="btn btn-primary radius" type="button"><i class="Hui-iconfont">&#xe632;</i> 保存并提交审核</button>
        <button onClick="layer_close();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
      </div>
    </div>
  </form>
</article>

<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="lib/layer/2.1/layer.js"></script> 
<script type="text/javascript" src="lib/laypage/1.2/laypage.js"></script> 
<script type="text/javascript" src="lib/My97DatePicker/WdatePicker.js"></script> 
<script type="text/javascript" src="static/h-ui/js/H-ui.js"></script> 
<script type="text/javascript" src="static/h-ui.admin/js/H-ui.admin.js"></script> 
<script type="text/javascript" src="lib/loading/loading.js"></script>
<script type="text/javascript" src="static/common/common.js"></script>
<script type="text/javascript" src="lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="static/common/DT_bootstrap.js"></script>
<script type="text/javascript" src="static/common/datatable_server.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/jquery.validate.min.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/validate-methods.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/messages_zh.min.js"></script>
<script type="text/javascript">
/*$(".Huiform").Validform(); */
</script>

<script>

   function initOrders(){
       
       var id = GetQueryString("id");
       if(id!=null){
          var data = getJSON2('/fs-server/orders/getOrdersById',{'id':id});
          if(data!=null)
           $('#id').val(data.id);
           $('#orderNo').val(data.orderNo);
           $('#amount').val(data.amount);
           $('#payType').val(data.payType);
           $('#status').val(data.status);
           $('#couponNo').val(data.couponNo);
           $('#couponAmount').val(data.couponAmount);
           $('#payAmount').val(data.payAmount);
           $('#dispatchCost').val(data.dispatchCost);
           $('#orderType').val(data.orderType);
           $('#dispatchType').val(data.dispatchType);
           $('#dispatchAddr').val(data.dispatchAddr);
           $('#contactUserName').val(data.contactUserName);
           $('#contractTel').val(data.contractTel);

       }

    }
    function addOrders(){

        var parameters = getSubmitItems("submit_form");
        $.ajax( {
          type : "post",
          url : '/fs-server/orders/addOrUpdateOrders',
          cache : false,
          async : false,//同步
          contentType: 'application/json',
          data : JSON.stringify(parameters),
          success : function(data) {
         
            if(data.success=='true'){
                alert("成功");
            }else{
                alert("失败");
            }
          },
          error : function(XMLHttpRequest, textStatus, errorThrown) {
          }
       });


    }
    var validataRule ={
        name:{
            required: true
        }
    };
    var validataMessage = {

        name:{
            required: "名称必填！"
        }


    };

    jQuery(document).ready(function () {

        initOrders();

        $.validator.setDefaults({
            submitHandler: function() {
                addOrders();
            }
        });
       // $("#submit_form").validate();
        $("#submit_form").validate({
            errorElement: 'span', //默认输入错误消息的容器
            errorPlacement: function(error, element) {
                error.appendTo(element.parent());
            },
            errorClass: 'error-block', // 默认的输入错误消息类
            focusInvalid: false, //不关注过去无效输入
            onfocusout:false,
            rules: validataRule,
            messages: validataMessage
        });

    });


</script>
</body>
</html>
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
<script type="text/javascript" src="http://libs.useso.com/js/respond.js/1.4.2/respond.min.js"></script>
<script type="text/javascript" src="http://cdn.bootcss.com/css3pie/2.0beta1/PIE_IE678.js"></script>
<![endif]-->

<link rel="stylesheet" type="text/css" href="static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css" href="lib/Hui-iconfont/1.0.7/iconfont.css" />
<link rel="stylesheet" type="text/css" href="lib/icheck/icheck.css" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/style.css" />
<link type="text/css" rel="stylesheet" href="lib/loading/loading.css" rel="stylesheet" type="text/css"/>
<!--[if IE 7]>
<link href="http://www.bootcss.com/p/font-awesome/assets/css/font-awesome-ie7.min.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link href="lib/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css" />
<title>添加产品</title>

</head>
<body>
<article class="page-container">
  <form class="form form-horizontal"  name='submit_form' id='submit_form' onsubmit="return false">

    <input type="hidden"   id="id" name="id">
    <div class="row cl">
          <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>所属分类：</label>
          <div class="formControls col-xs-8 col-sm-9"> <span class="select-box">
				<select name="categoryId" id="categoryId" class="select">
                    <option value="0">蔬菜</option>
                    <option value="1">水果</option>
                </select>
				</span>
          </div>
      </div>
    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2">名称：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="name" name="name">
      </div>
    </div>
    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2">编号：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="productNo" name="productNo">
      </div>
    </div>

    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2">商家名称：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="corpName" name="corpName">
      </div>
    </div>
    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2">商家ID：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="corpId" name="corpId">
      </div>
    </div>
    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 定价：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text"  placeholder="" id="price" name="price">
      </div>
    </div>
   <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 销售价格：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text"  placeholder="" id="sellPrice" name="sellPrice">
      </div>
    </div>

    <div class="row cl">
          <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>是否预售：</label>
          <div class="formControls col-xs-8 col-sm-9"> <span class="select-box">
				<select name="tagPresell" id="tagPresell" class="select">
                    <option value="0">是</option>
                    <option value="1">否</option>
                </select>
				</span>
          </div>
      </div>
      <div class="row cl">
          <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>是否促销：</label>
          <div class="formControls col-xs-8 col-sm-9"> <span class="select-box">
				<select name="tagPromotion" id="tagPromotion" class="select">
                    <option value="0">是</option>
                    <option value="1">否</option>
                </select>
				</span>
          </div>
      </div>
      <div class="row cl">
          <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>是否新品：</label>
          <div class="formControls col-xs-8 col-sm-9"> <span class="select-box">
				<select name="tagNew" id="tagNew" class="select">
                    <option value="0">是</option>
                    <option value="1">否</option>
                </select>
				</span>
          </div>
      </div>
    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 产品标签：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="tagInfo" name="tagInfo">
      </div>
    </div>
    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 销售数量：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="countSale" name="countSale">
      </div>
    </div>
    <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 收藏数量：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="countWish" name="countWish">
      </div>
    </div>
      <div class="row cl">
      <label class="form-label col-xs-4 col-sm-2"> 点赞数量：</label>
      <div class="formControls col-xs-8 col-sm-9">
        <input type="text" class="input-text" value="0" placeholder="" id="countLike" name="countLike">
      </div>
    </div>
      <div class="row cl">
          <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>星级别：</label>
          <div class="formControls col-xs-8 col-sm-9"> <span class="select-box">
				<select name="star" id="star" class="select">
                    <option value="1">1星</option>
                    <option value="2">2星</option>
                    <option value="3">3星</option>
                    <option value="4">4星</option>
                    <option value="5">5星</option>
                </select>
				</span>
          </div>
      </div>
      <div class="row cl">
          <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>概述：</label>
          <div class="formControls col-xs-8 col-sm-9">
              <textarea id="summary" name="summary" cols="" rows="" class="textarea"  placeholder="说点什么...最少输入10个字符" onKeyUp="textarealength(this,200)"></textarea>
              <p class="textarea-numberbar"><em class="textarea-length">0</em>/100</p>
          </div>
      </div>
      <div class="row cl">
          <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>其他信息：</label>
          <div class="formControls col-xs-8 col-sm-9">
              <textarea id="otherInfo" name="otherInfo" cols="" rows="" class="textarea"  placeholder="说点什么...最少输入10个字符" onKeyUp="textarealength(this,200)"></textarea>
              <p class="textarea-numberbar"><em class="textarea-length">0</em>/100</p>
          </div>
      </div>
    <div class="row cl">
      <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2">
        <button onClick="addProduct();" class="btn btn-primary radius" type="button"><i class="Hui-iconfont">&#xe632;</i> 保存并提交审核</button>
        <button onClick="layer_close();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
      </div>
    </div>
  </form>
</article>

<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="lib/layer/2.1/layer.js"></script> 
<script type="text/javascript" src="lib/laypage/1.2/laypage.js"></script> 
<script type="text/javascript" src="lib/My97DatePicker/WdatePicker.js"></script> 
<script type="text/javascript" src="static/h-ui/js/H-ui.js"></script> 
<script type="text/javascript" src="static/h-ui.admin/js/H-ui.admin.js"></script> 
<script type="text/javascript" src="lib/loading/loading.js"></script>
<script type="text/javascript" src="static/common/common.js"></script>
<script type="text/javascript" src="lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="static/common/DT_bootstrap.js"></script>
<script type="text/javascript" src="static/common/datatable_server.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/jquery.validate.min.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/validate-methods.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/messages_zh.min.js"></script>
<script type="text/javascript">
/*$(".Huiform").Validform(); */
</script>

<script>
    function initProduct(){
       var id = getParameterByName("id");
       if(id!=null){
          var data = getJSON2('/fs-server/product/getProductById',{'id':id});
          if(data!=null)
            $('#id').val(data.id);
            $('#name').val(data.name);
            $('#productNo').val(data.productNo);
           $('#categoryId').val(data.categoryId);
           $('#corpName').val(data.corpName);
           $('#corpId').val(data.corpId);
           $('#price').val(data.price);
           $('#sellPrice').val(data.sellPrice);
           $('#tagPresell').val(data.tagPresell);
           $('#tagPromotion').val(data.tagPromotion);
           $('#tagNew').val(data.tagNew);
           $('#tagInfo').val(data.tagInfo);
           $('#countSale').val(data.countSale);
           $('#countWish').val(data.countWish);
           $('#countLike').val(data.countLike);
           $('#star').val(data.star);
           $('#summary').val(data.summary);
           $('#otherInfo').val(data.otherInfo);

       }

    }
    function addProduct(){

        var parameters = getSubmitItems("submit_form");
   
        $.ajax( {
          type : "post",
          url : '/fs-server/product/addOrUpdateProduct',
          cache : false,
          async : false,//同步
          contentType: 'application/json',
          data : JSON.stringify(parameters),
          success : function(data) {
         
            if(data.success=='true'){
                alert("成功");
            }else{
                alert("失败");
            }
          },
          error : function(XMLHttpRequest, textStatus, errorThrown) {
          }
       });

    }
    var validataRule ={
        name:{
            required: true
        },
        productNo:{
          required:true
        },
        tagInfo:{
          required:true
        }
    };
    var validataMessage = {

        name:{
            required: "产品名称必填！"
        }


    };

    jQuery(document).ready(function () {

        initProduct();

        $.validator.setDefaults({
            submitHandler: function() {
                addProduct();
            }
        });
       // $("#submit_form").validate();
        $("#submit_form").validate({
            errorElement: 'span', //默认输入错误消息的容器
            errorPlacement: function(error, element) {
                error.appendTo(element.parent());
            },
            errorClass: 'error-block', // 默认的输入错误消息类
            focusInvalid: false, //不关注过去无效输入
            onfocusout:false,
            rules: validataRule,
            messages: validataMessage
        });

    });

</script>
</body>
</html>